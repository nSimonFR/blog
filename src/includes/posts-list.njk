<ul class="post-list">
  {% for post in postslist | reverse %}
    <li class="post-list__item">
      <div class="post-list__header">
        <div class="post-list__meta">
          <time datetime="{{ post.date | htmlDateString }}">
            {{ post.date | readableDate }}
          </time>
          <span>
            |
          </span>
          {% if post.data.recipe and post.data.recipe.metadata %}
            {% set prepTime = post.data.recipe.metadata["time.prep"] %}
            {% set cookTime = post.data.recipe.metadata["time.cook"] %}
            {% if prepTime or cookTime %}
              <span>
                {% if prepTime %}
                  {{ prepTime }} min prep{% endif %}
                {% if prepTime and cookTime %}
                  &
                {% endif %}
                {% if cookTime %}
                  {{ cookTime }} min cook{% endif %}
              </span>
            {% else %}
              <span>{{ post | readingTime }} read</span>
            {% endif %}
          {% else %}
            <span>{{ post | readingTime }} read</span>
          {% endif %}
        </div>
        <div class="post-list__tags">
          {% for tag in post.data.tags %}
            {%- if collections.tagList.indexOf(tag) != -1 -%}
              {% set tagUrl %}/tags/{{ tag }}/{% endset %}
              <a href="{{ tagUrl | url }}">#{{ tag }}</a>
            {%- endif -%}
          {% endfor %}
        </div>
      </div>
      <div class="post-list__main">
        <div class="post-list__content">
          <h3 class="post-list__title">
            <a href="{{ post.url }}">{{ post.data.title }}</a>
          </h3>
          <p class="post-list__excerpt">
            {% if post.data.subtitle %}
              {% if post.data.subtitle.length > 200 %}
                <i>{{ post.data.subtitle | truncate(200) }}...</i>
              {% else %}
                <i>{{ post.data.subtitle }}</i>
              </br>
              {{ post.templateContent | excerpt | safe }}
            {% endif %}
          {% else %}
            {{ post.templateContent | excerpt | safe }}
          {% endif %}
        </p>
        <a class="post-list__read-more" href="{{ post.url }}">read article</a>
      </div>
      {% if post.data.images and post.data.images.main %}
        <div class="post-list__image">
          <a href="{{ post.url }}">
            <img src="{{ post.url }}../{{ post.data.images.main }}" alt="{{ post.data.title }}" loading="lazy"></a>
          </div>
        {% endif %}
      </div>
    </li>
  {% endfor %}
</ul>
